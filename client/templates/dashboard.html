<template name="dashboard">
	<h3>Dashboard</h3>
	
		{{#each trains}}
			{{> train}}
		{{/each}}
				
		Online user:
		<ul>
			{{#each connections}}
				{{> connection}}
			{{/each}}
		</ul>
</template>


<template name="connection">
	<li>user:
		{{#if equals _id myconnection}}
			<b>{{_id}}</b>
		{{ else }}
			{{_id}}
		{{/if}}
	
		{{#if userId}}
			(user: {{username}})
		{{ else }}
			(guest)
		{{/if}}
		- 
		{{#if equals _id currentengineman}}
			(<b>engineman</b>)
		{{ else }}
			(passenger)
		{{/if}}
	</li>
</template>

<template name="train">

	<h3>
		{{#if currentengineman}}
			Your current engineman is: {{currentengineman}}
		{{ else }}
			<input type="button" value="become engineman" class="button engineman" name="engineman" />
		{{/if}}
	</h3>
	
	{{#if equals myconnection currentengineman}}
			
		<label for="targetspeed">targetspeed: </label><br />
		<input type="number" class="targetspeed" id="targetspeed" name="targetspeed" value="{{targetspeed}}" min="0" max="50" /><br />
		<label for="direction">direction: </label>
		<div>
			<input type="checkbox" id="direction" name="direction" class="switch direction" checked="{{direction}}" />
			<label for="direction">forward</label>
		</div>
		<br />
		
		<input type="button" value="leave driver's cab" class="button leave" name="leave" />
		<br />
		
	{{/if}}
	
	<label for="currentspeed">current speed: </label>
	<!-- <input type="number" id="currentspeed" name="currentspeed" value="{{currentspeed}}" readonly>-->
	{{currentspeed}}<br >
	
	<label for="currentdirection">direction: </label>
	<!-- <input type="number" id="currentdirection" name="currentdirection" value="{{currentdirection}}" readonly>-->
	{{currentdirection}}<br >
	
</template>






<template name="oldstuff">
	old stuff
	
	{{#if equals currentUser.username currentengineman}}
		You are the current engineman.
	{{ else }}
	
		{{#if equals currentengineman ""}}
			There is no engineman at the moment - click here to control the train.
		{{ else }}
			Your current engineman is: {{currentengineman}}
		{{/if}}
	
	{{/if}}
  <!--
	<div class="steering">
		<div class="speed1"><div class="speedinner">speed 1</div></div>
		<div class="speed2"><div class="speedinner">speed 2</div></div>
		<div class="speed3"><div class="speedinner">speed 3</div></div>
	</div>
	-->
		<!--
		<label for="targetspeed">targetspeed: </label><br />
		<input type="number" id="targetspeed" name="targetspeed" value="{{getTargetspeed}}" min="-50" max="50" />
		<br />
		
		<label for="currentspeed">current speed: </label><br />
		<!- - <input type="number" id="currentspeed" name="currentspeed" value="{{getCurrentspeed}}" readonly>- ->
		{{getCurrentspeed}}
		
		<label for="currentspeed">direction: </label><br />
		<!- - <input type="number" id="currentspeed" name="currentspeed" value="{{getCurrentdirection}}" readonly>- ->
		{{getCurrentdirection}}
		
			
	<!- -
	
	<div class="container"></div>
    <div id="tachometer">
                  <div class="ii">
                      <div><b><span class="num_1">0</span></b></div>
                      <div><b></b></div>
                      <div><b><span class="num_2">1</span></b></div>
                      <div><b></b></div>
                      <div><b><span class="num_3">2</span></b></div>
                      <div><b></b></div>
                      <div><b><span class="num_4">3</span></b></div>
                      <div><b></b></div>
                      <div><b><span class="num_5">4</span></b></div>
                      <div><b></b></div>
                      <div><b><span class="num_6">5</span></b></div>
                      <div><b></b></div>
                      <div><b><span class="num_7">6</span></b></div>
                      <div><b></b></div>
                      <div><b><span class="num_8">7</span></b></div>
                      <div><b></b></div>
                      <div><b><span class="num_9">8</span></b></div>
                  </div> 
                <div id="redline"></div>
                
          <div class="line" style="animation: pendulum; 
          animation-iteration-count: infinite; animation-duration: 4s;"></div>
          
         <div class="pin"><div class="inner"></div></div> 
    </div>
    -->
</template>